{% import "macros.html" as macros %}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Выборы 2018</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
    <style>
        body { padding: 20px; }
        h1, h2 { margin-top: 24px; margin-bottom: 16px; }
        table { font-size: 0.9rem; }
    </style>
</head>

<body>
<div class="container">
  <h1 class="mb-4">Результаты выборов президента РФ 2018</h1>

  <div class="accordion" id="tablesAccordion">

    <div class="accordion-item">
      <h2 class="accordion-header" id="headingRegions">
        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseRegions" aria-expanded="true" aria-controls="collapseRegions">
          Субъекты РФ
        </button>
      </h2>
      <div id="collapseRegions" class="accordion-collapse collapse show" aria-labelledby="headingRegions"
           data-bs-parent="#tablesAccordion">
        <div class="accordion-body">
          {{ macros.regions_table(regions) }}
        </div>
      </div>
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header" id="headingTerritories">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseTerritories" aria-expanded="false" aria-controls="collapseTerritories">
          Территории
        </button>
      </h2>
      <div id="collapseTerritories" class="accordion-collapse collapse" aria-labelledby="headingTerritories"
           data-bs-parent="#tablesAccordion">
        <div class="accordion-body">
          {{ macros.territories_table(territories) }}
        </div>
      </div>
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header" id="headingPrecincts">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapsePrecincts" aria-expanded="false" aria-controls="collapsePrecincts">
          УИК (первые 200)
        </button>
      </h2>
      <div id="collapsePrecincts" class="accordion-collapse collapse" aria-labelledby="headingPrecincts"
           data-bs-parent="#tablesAccordion">
        <div class="accordion-body">
          <p class="text-muted">Показаны только первые 200 участков для наглядности.</p>
          {{ macros.precincts_table(precincts) }}
        </div>
      </div>
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header" id="headingCandidates">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseCandidates" aria-expanded="false" aria-controls="collapseCandidates">
          Кандидаты
        </button>
      </h2>
      <div id="collapseCandidates" class="accordion-collapse collapse" aria-labelledby="headingCandidates"
           data-bs-parent="#tablesAccordion">
        <div class="accordion-body">
          {{ macros.candidates_table(candidates) }}
        </div>
      </div>
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header" id="headingCandStats">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseCandStats" aria-expanded="false" aria-controls="collapseCandStats">
          Суммарные голоса по кандидатам
        </button>
      </h2>
      <div id="collapseCandStats" class="accordion-collapse collapse" aria-labelledby="headingCandStats"
           data-bs-parent="#tablesAccordion">
        <div class="accordion-body">
          <table class="table table-striped table-bordered table-sm">
            <thead class="table-dark">
            <tr>
              <th>Кандидат</th>
              <th>Голоса</th>
            </tr>
            </thead>
            <tbody>
            {% for row in total_by_candidate %}
            <tr>
              <td>{{ row.candidate__name }}</td>
              <td>{{ row.total_votes }}</td>
            </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header" id="headingRegionStats">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseRegionStats" aria-expanded="false" aria-controls="collapseRegionStats">
          Суммарные голоса по регионам
        </button>
      </h2>
      <div id="collapseRegionStats" class="accordion-collapse collapse" aria-labelledby="headingRegionStats"
           data-bs-parent="#tablesAccordion">
        <div class="accordion-body">
          <table class="table table-striped table-bordered table-sm">
            <thead class="table-dark">
            <tr>
              <th>Регион</th>
              <th>Голоса</th>
            </tr>
            </thead>
            <tbody>
            {% for row in total_by_region %}
            <tr>
              <td>{{ row.precinct__territory__region__name }}</td>
              <td>{{ row.total_votes }}</td>
            </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>


</html>
